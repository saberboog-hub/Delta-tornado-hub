--[[
	Orbit System
	Parte 1 - Base do sistema (servidor)

	Essa parte:
	- Cria dados por player
	- Recebe ON / OFF
	- Recebe ALTURA
	- NÃO faz nada no jogo ainda
]]

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local remote = ReplicatedStorage:WaitForChild("OrbitRemote")

-- Tabela de dados por jogador
local playerData = {}

-- Player entrou
Players.PlayerAdded:Connect(function(player)
	playerData[player] = {
		enabled = false,
		height = 10
	}

	print("[Orbit | Parte 1] Dados criados para", player.Name)
end)

-- Player saiu
Players.PlayerRemoving:Connect(function(player)
	playerData[player] = nil
	print("[Orbit | Parte 1] Dados removidos de", player.Name)
end)

-- Recebe dados (por enquanto só salva)
remote.OnServerEvent:Connect(function(player, enabled, height)
	if not playerData[player] then return end

	playerData[player].enabled = enabled == true
	playerData[player].height = math.clamp(tonumber(height) or 10, 0, 50)

	print(
		"[Orbit | Parte 1]",
		player.Name,
		"ON:", playerData[player].enabled,
		"ALTURA:", playerData[player].height
	)
end)
--[[
	Orbit System
	Parte 2 - Botão pequeno "Abrir"

	Essa parte:
	- Cria um botão flutuante
	- Funciona no mobile
	- É arrastável
	- NÃO abre menu ainda
]]

local gui = script.Parent
gui.ResetOnSpawn = false

-- Botão "Abrir"
local openButton = Instance.new("TextButton")
openButton.Name = "OpenButton"
openButton.Size = UDim2.fromOffset(90, 35)
openButton.Position = UDim2.fromScale(0.05, 0.5)
openButton.Text = "Abrir"
openButton.Font = Enum.Font.GothamBold
openButton.TextSize = 14
openButton.TextColor3 = Color3.new(1, 1, 1)
openButton.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
openButton.Parent = gui

-- Cantos arredondados
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 8)
corner.Parent = openButton

-- Mobile friendly
openButton.Active = true
openButton.Draggable = true

-- Clique (debug)
openButton.MouseButton1Click:Connect(function()
	print("[Orbit | Parte 2] Botão Abrir clicado")
end)
