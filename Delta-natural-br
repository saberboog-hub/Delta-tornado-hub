-- Delta Natural Tornado Hub (ALL-IN-ONE)
-- Coloque este Script em ServerScriptService

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")

local SETTINGS = {}
local DEFAULTS = {Enabled=false, Height=10}

local ORBIT_RADIUS = 8
local PULL_FORCE = 120
local SPIN_FORCE = 90

local function getSettings(plr)
	SETTINGS[plr] = SETTINGS[plr] or {Enabled=DEFAULTS.Enabled, Height=DEFAULTS.Height}
	return SETTINGS[plr]
end

local function createUI(plr)
	local gui = Instance.new("ScreenGui")
	gui.Name = "DeltaTornadoGui"
	gui.ResetOnSpawn = false
	gui.Parent = plr:WaitForChild("PlayerGui")

	local openBtn = Instance.new("TextButton")
	openBtn.Size = UDim2.fromOffset(90, 36)
	openBtn.Position = UDim2.fromScale(0.02, 0.6)
	openBtn.Text = "Abrir"
	openBtn.BackgroundColor3 = Color3.fromRGB(20,20,20)
	openBtn.TextColor3 = Color3.fromRGB(255,255,255)
	openBtn.Parent = gui
	openBtn.Active = true
	openBtn.Draggable = true

	local frame = Instance.new("Frame")
	frame.Size = UDim2.fromOffset(320, 220)
	frame.Position = UDim2.fromScale(0.35, 0.3)
	frame.BackgroundColor3 = Color3.fromRGB(25,25,25)
	frame.Visible = false
	frame.Parent = gui

	local corner = Instance.new("UICorner", frame)

	local title = Instance.new("TextLabel")
	title.Size = UDim2.fromOffset(320, 36)
	title.Text = "Delta Natural Tornado"
	title.BackgroundTransparency = 1
	title.TextColor3 = Color3.fromRGB(255,255,255)
	title.Parent = frame

	local minimize = Instance.new("TextButton")
	minimize.Size = UDim2.fromOffset(36, 36)
	minimize.Position = UDim2.fromOffset(284, 0)
	minimize.Text = "-"
	minimize.BackgroundTransparency = 1
	minimize.TextColor3 = Color3.fromRGB(255,255,255)
	minimize.Parent = frame

	local onBtn = Instance.new("TextButton")
	onBtn.Size = UDim2.fromOffset(140, 36)
	onBtn.Position = UDim2.fromOffset(20, 60)
	onBtn.Text = "ON"
	onBtn.BackgroundColor3 = Color3.fromRGB(40,120,40)
	onBtn.TextColor3 = Color3.fromRGB(255,255,255)
	onBtn.Parent = frame

	local offBtn = Instance.new("TextButton")
	offBtn.Size = UDim2.fromOffset(140, 36)
	offBtn.Position = UDim2.fromOffset(160, 60)
	offBtn.Text = "OFF"
	offBtn.BackgroundColor3 = Color3.fromRGB(120,40,40)
	offBtn.TextColor3 = Color3.fromRGB(255,255,255)
	offBtn.Parent = frame

	local sliderBg = Instance.new("Frame")
	sliderBg.Size = UDim2.fromOffset(280, 10)
	sliderBg.Position = UDim2.fromOffset(20, 130)
	sliderBg.BackgroundColor3 = Color3.fromRGB(60,60,60)
	sliderBg.Parent = frame

	local slider = Instance.new("Frame")
	slider.Size = UDim2.fromOffset(10, 20)
	slider.Position = UDim2.fromOffset(0, -5)
	slider.BackgroundColor3 = Color3.fromRGB(200,200,200)
	slider.Parent = sliderBg
	slider.Active = true
	slider.Draggable = true

	local heightLabel = Instance.new("TextLabel")
	heightLabel.Size = UDim2.fromOffset(280, 24)
	heightLabel.Position = UDim2.fromOffset(20, 150)
	heightLabel.Text = "Altura: 10"
	heightLabel.BackgroundTransparency = 1
	heightLabel.TextColor3 = Color3.fromRGB(255,255,255)
	heightLabel.Parent = frame

	openBtn.MouseButton1Click:Connect(function()
		frame.Visible = true
	end)

	minimize.MouseButton1Click:Connect(function()
		frame.Visible = false
	end)

	onBtn.MouseButton1Click:Connect(function()
		getSettings(plr).Enabled = true
	end)

	offBtn.MouseButton1Click:Connect(function()
		getSettings(plr).Enabled = false
	end)

	slider:GetPropertyChangedSignal("Position"):Connect(function()
		local x = math.clamp(slider.Position.X.Offset, 0, sliderBg.AbsoluteSize.X - slider.AbsoluteSize.X)
		slider.Position = UDim2.fromOffset(x, slider.Position.Y.Offset)
		local value = math.floor((x / (sliderBg.AbsoluteSize.X - slider.AbsoluteSize.X)) * 50)
		getSettings(plr).Height = value
		heightLabel.Text = "Altura: "..value
	end)
end

Players.PlayerAdded:Connect(function(plr)
	getSettings(plr)
	plr.CharacterAdded:Connect(function()
		task.wait(1)
		createUI(plr)
	end)
end)

local function applyOrbit(plr)
	local cfg = getSettings(plr)
	if not cfg.Enabled then return end
	local char = plr.Character
	if not char then return end
	local hrp = char:FindFirstChild("HumanoidRootPart")
	if not hrp then return end

	for _, part in ipairs(workspace:GetDescendants()) do
		if part:IsA("BasePart") and not part.Anchored and not part:IsDescendantOf(char) then
			local targetPos = hrp.Position + Vector3.new(0, cfg.Height, 0)
			if (part.Position - targetPos).Magnitude <= ORBIT_RADIUS then
				local att = part:FindFirstChild("OrbitAtt") or Instance.new("Attachment", part)
				att.Name = "OrbitAtt"
				local vf = part:FindFirstChild("OrbitForce") or Instance.new("VectorForce", part)
				vf.Name = "OrbitForce"
				vf.Attachment0 = att
				vf.RelativeTo = Enum.ActuatorRelativeTo.World

				local pullDir = (targetPos - part.Position).Unit
				local pull = pullDir * PULL_FORCE * part.AssemblyMass
				local spinDir = Vector3.new(-pullDir.Z, 0, pullDir.X)
				local spin = spinDir * SPIN_FORCE * part.AssemblyMass
				vf.Force = pull + spin
			end
		end
	end
end

RunService.Heartbeat:Connect(function()
	for _, plr in ipairs(Players:GetPlayers()) do
		applyOrbit(plr)
	end
end)
