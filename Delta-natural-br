--[[
	Orbit System
	Parte 1 - Base do sistema (servidor)

	Essa parte:
	- Cria dados por player
	- Recebe ON / OFF
	- Recebe ALTURA
	- NÃO faz nada no jogo ainda
]]

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local remote = ReplicatedStorage:WaitForChild("OrbitRemote")

-- Tabela de dados por jogador
local playerData = {}

-- Player entrou
Players.PlayerAdded:Connect(function(player)
	playerData[player] = {
		enabled = false,
		height = 10
	}

	print("[Orbit | Parte 1] Dados criados para", player.Name)
end)

-- Player saiu
Players.PlayerRemoving:Connect(function(player)
	playerData[player] = nil
	print("[Orbit | Parte 1] Dados removidos de", player.Name)
end)

-- Recebe dados (por enquanto só salva)
remote.OnServerEvent:Connect(function(player, enabled, height)
	if not playerData[player] then return end

	playerData[player].enabled = enabled == true
	playerData[player].height = math.clamp(tonumber(height) or 10, 0, 50)

	print(
		"[Orbit | Parte 1]",
		player.Name,
		"ON:", playerData[player].enabled,
		"ALTURA:", playerData[player].height
	)
end)
